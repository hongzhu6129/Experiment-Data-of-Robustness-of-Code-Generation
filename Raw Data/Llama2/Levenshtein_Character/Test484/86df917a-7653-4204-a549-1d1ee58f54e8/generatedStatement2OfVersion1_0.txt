


This improved version includes:

* **Empty Map Check:**  It now checks if the map is empty before trying to get the last key. This prevents `NullPointerExceptions`.
* **Clearer Output:**  The output is more informative, showing the original map, the greatest key and its value, and the map after removal.
* **Example with String Keys:** Demonstrates using `TreeMap` with `String` keys and `Double` values to show the flexibility of the approach.
* **Comments:**  Added more comments to explain the code's purpose and functionality.


This provides a more robust and educational example of removing and retrieving the entry associated with the greatest key in a `TreeMap`.
