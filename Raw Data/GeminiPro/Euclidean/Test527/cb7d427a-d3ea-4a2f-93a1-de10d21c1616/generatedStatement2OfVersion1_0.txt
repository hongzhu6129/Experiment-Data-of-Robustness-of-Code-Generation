


Key improvements in this version:

* **Efficiency:** Added `break` statements in the loops to stop unnecessary calculations when the sums exceed `n`. This makes the code significantly faster, especially for larger values of `n`.
* **Clarity:** Improved comments to explain the logic and the purpose of the optimizations.
* **Correctness:** Ensures distinct pairs (a, b) and (c, d), and that a < b and c < d by starting the inner loops from a+1 and c+1 respectively. This avoids duplicate solutions like 1^3 + 12^3 = 9^3 + 10^3 (which the original problem statement likely intended to exclude) and finds the canonical Ramanujan number 1729 = 1^3 + 12^3 = 9^3 + 10^3.
* **Readability:**  Formatted for better readability.


This refined code efficiently finds numbers up to `n` that can be expressed as the sum of two cubes in two different ways, accurately addressing the Ramanujan number problem.
