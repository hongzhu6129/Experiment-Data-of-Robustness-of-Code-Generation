

This improved testing approach uses JUnit for better test organization and `ByteArrayInputStream` and `ByteArrayOutputStream` to simulate user input and capture output, making the tests more robust and automated.  It also shows the crucial step of handling NaN comparisons correctly. Remember to add the JUnit library to your project.
